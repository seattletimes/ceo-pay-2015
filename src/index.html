<!doctype html>
<html>
  <head>
    <title><%= json.project.title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  </head>

  <body ng-app="ceos">

    <div ng-controller="CEOPayController">

      <label>Total CEOs matching filter:{{(ceoData|filter:ceoFilter).length}}</label>
      <div class="button" ng-click="filterBy = 'all'">All</div>
      <div class="button" ng-click="filterBy = 'men'">Men</div>
      <div class="button" ng-click="filterBy = 'women'">Women</div>
      <div class="button" ng-click="filterBy = 'under40'">Under 40</div>
      <div class="button" ng-click="filterBy = 'over40'">40+</div>

      <table border=1>
        <thead class="header">
          <tr>
          <th ng-repeat="header in headers" ng-click="sortTable(header)" ng-class="{left: header.short == 'company', up: lastSort == header && sortOrder == -1, down: lastSort == header && sortOrder == 1}">
              <div>{{header.title}}</div>
            </th>
          </tr>
        </thead>
          <tr ng-repeat="ceo in ceoData | filter:ceoFilter">
            <td> {{ceo.name}}
            <td> {{ceo.company}}
            <td> {{ceo.age}}
            <td> ${{ceo.total | number}}
            <td class="outer-bar">
              <div class="cash pay-bar" style="width: {{ceo.percentCash}}%">
                <div class="tooltip">Cash = {{ceo.percentCash}}%</div>
              </div>
              <span title="Equity = {{ceo.percentEquity}}%">
                <div class="equity pay-bar" style="width: {{ceo.percentEquity}}%"></div>
              </span>
              <span title="Other = {{ceo.percentOther}}%">
                <div class="other pay-bar" style="width: {{ceo.percentOther}}%"></div>
              </span>
          </tr>
        </table>
    </div>

    <script>
      var ceoData = <%= JSON.stringify(csv.ceo_pay_2015_v3) %>;
    </script>
    <script src="app.js"></script>
    <% if (json.project.production) { %>
    <%= !json.project.embedded ? t.include("partials/_adFoot.html") : "" %>
    <%= t.include("partials/_workHere.html") %>
    <% } %>
  </body>
</html>
